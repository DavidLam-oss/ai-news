# iPadåè®®å¾®ä¿¡åŠ©æ‰‹é›†æˆæŒ‡å—

## ğŸ¯ æ¦‚è¿°

åŸºäºiPadåè®®çš„å¾®ä¿¡åŠ©æ‰‹æ˜¯ä¸€ä¸ªç¨³å®šå¯é çš„è§£å†³æ–¹æ¡ˆï¼Œç›¸æ¯”ä¼ ç»Ÿçš„itchatã€wechatyç­‰å¼€æºæ–¹æ¡ˆï¼Œå…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š

- âœ… **ç¨³å®šå¯é ** - åŸºäºiPadåè®®ï¼Œä¸æ˜“è¢«å°å·
- âœ… **åŠŸèƒ½å®Œæ•´** - æ”¯æŒç¾¤èŠã€ç§èŠã€æœ‹å‹åœˆç­‰å®Œæ•´åŠŸèƒ½
- âœ… **è‡ªåŠ¨åŒ–ç¨‹åº¦é«˜** - æ”¯æŒæ‰¹é‡å‘é€åˆ°å¤šä¸ªç¾¤
- âœ… **ç»´æŠ¤æˆæœ¬ä½** - ä¸éœ€è¦é¢‘ç¹æ›´æ–°å’Œä¿®å¤

## ğŸ”§ é…ç½®è¯´æ˜

### 1. ç¯å¢ƒå˜é‡é…ç½®

åœ¨ `.env` æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š

```bash
# iPadåè®®å¾®ä¿¡åŠ©æ‰‹é…ç½®
IPAD_WEBHOOK_URL=http://your-ipad-assistant:8080/webhook
DEFAULT_GROUP_NAME=AIç§‘æŠ€æ—©æŠ¥ç¾¤
TARGET_GROUPS=AIç§‘æŠ€æ—©æŠ¥ç¾¤,æŠ€æœ¯äº¤æµç¾¤,äº§å“è®¨è®ºç¾¤
```

### 2. é…ç½®å‚æ•°è¯´æ˜

| å‚æ•° | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| `IPAD_WEBHOOK_URL` | iPadåè®®åŠ©æ‰‹çš„webhookåœ°å€ | `http://localhost:8080/webhook` |
| `DEFAULT_GROUP_NAME` | é»˜è®¤å‘é€çš„ç¾¤åç§° | `AIç§‘æŠ€æ—©æŠ¥ç¾¤` |
| `TARGET_GROUPS` | ç›®æ ‡ç¾¤åˆ—è¡¨ï¼ˆé€—å·åˆ†éš”ï¼‰ | `ç¾¤1,ç¾¤2,ç¾¤3` |

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### 1. åŸºæœ¬ä½¿ç”¨

```python
from wechat.ipad_client import IpadWechatClient

# åˆ›å»ºå®¢æˆ·ç«¯
client = IpadWechatClient()

# è¿æ¥
await client.connect()

# å‘é€æ¶ˆæ¯åˆ°ç¾¤
success = await client.send_to_group(report, "AIç§‘æŠ€æ—©æŠ¥ç¾¤")

# å…³é—­è¿æ¥
await client.close()
```

### 2. æ‰¹é‡å‘é€

```python
# å‘é€åˆ°å¤šä¸ªç¾¤
target_groups = ["AIç§‘æŠ€æ—©æŠ¥ç¾¤", "æŠ€æœ¯äº¤æµç¾¤", "äº§å“è®¨è®ºç¾¤"]
results = await client.send_to_multiple_groups(report, target_groups)

# æŸ¥çœ‹ç»“æœ
for group_name, success in results.items():
    print(f"{group_name}: {'æˆåŠŸ' if success else 'å¤±è´¥'}")
```

### 3. å¯Œæ–‡æœ¬æ¶ˆæ¯

```python
# å‘é€å¯Œæ–‡æœ¬æ¶ˆæ¯ï¼ˆåŒ…å«å›¾ç‰‡å’Œæ–‡å­—ï¼‰
success = await client.send_rich_message(report, "AIç§‘æŠ€æ—©æŠ¥ç¾¤")
```

### 4. æœ‹å‹åœˆå‘å¸ƒ

```python
# å‘å¸ƒæœ‹å‹åœˆ
content = "ğŸ¤– AIç§‘æŠ€æ—©æŠ¥ - 2025-09-07\n\nä»Šæ—¥AIç§‘æŠ€åŠ¨æ€..."
success = await client.publish_moment(content)
```

## ğŸ“‹ APIæ¥å£è¯´æ˜

### è¿æ¥ç®¡ç†

- `connect()` - è¿æ¥åˆ°iPadåè®®åŠ©æ‰‹
- `check_connection()` - æ£€æŸ¥è¿æ¥çŠ¶æ€
- `close()` - å…³é—­è¿æ¥

### ç¾¤èŠåŠŸèƒ½

- `send_to_group(report, group_name)` - å‘é€åˆ°å•ä¸ªç¾¤
- `send_to_multiple_groups(report, group_names)` - å‘é€åˆ°å¤šä¸ªç¾¤
- `get_group_list()` - è·å–ç¾¤åˆ—è¡¨
- `get_group_members(group_name)` - è·å–ç¾¤æˆå‘˜

### æ¶ˆæ¯ç±»å‹

- `send_rich_message(report, group_name)` - å‘é€å¯Œæ–‡æœ¬æ¶ˆæ¯
- `send_image_with_text(image_path, text, group_name)` - å‘é€å›¾ç‰‡å’Œæ–‡å­—
- `send_private_message(user_name, message)` - å‘é€ç§èŠæ¶ˆæ¯

### æœ‹å‹åœˆåŠŸèƒ½

- `publish_moment(content, image_paths)` - å‘å¸ƒæœ‹å‹åœˆ

## ğŸ”„ ä¸ç³»ç»Ÿé›†æˆ

### 1. è‡ªåŠ¨é›†æˆ

ç³»ç»Ÿä¼šè‡ªåŠ¨æ£€æµ‹æ˜¯å¦é…ç½®äº†iPadåè®®åŠ©æ‰‹ï¼š

```python
# åœ¨ crawler/main.py ä¸­
async def send_to_wechat(self, report):
    # ä¼˜å…ˆä½¿ç”¨iPadåè®®å¾®ä¿¡åŠ©æ‰‹
    if self.settings.IPAD_WEBHOOK_URL:
        await self.send_to_wechat_ipad(report)
    else:
        # å›é€€åˆ°ä¼ ç»Ÿå¾®ä¿¡API
        await self.send_to_wechat_traditional(report)
```

### 2. å®šæ—¶ä»»åŠ¡

è®¾ç½®å®šæ—¶ä»»åŠ¡è‡ªåŠ¨å‘é€æ—©æŠ¥ï¼š

```bash
# æ¯å¤©ä¸Šåˆ8ç‚¹æ‰§è¡Œ
0 8 * * * cd /path/to/ai-news && source venv/bin/activate && python3 crawler/main.py
```

## ğŸ§ª æµ‹è¯•è„šæœ¬

### 1. åŸºç¡€åŠŸèƒ½æµ‹è¯•

```bash
python3 test_ipad_wechat.py
```

### 2. å®Œæ•´ç³»ç»Ÿæµ‹è¯•

```bash
python3 test_complete_system_with_wechat.py
```

## ğŸ“Š æµ‹è¯•ç»“æœç¤ºä¾‹

```
ğŸ¤– æµ‹è¯•iPadåè®®å¾®ä¿¡åŠ©æ‰‹åŠŸèƒ½
==================================================

ğŸ“¡ ç¬¬ä¸€æ­¥ï¼šæµ‹è¯•è¿æ¥...
âœ… iPadå¾®ä¿¡å®¢æˆ·ç«¯è¿æ¥æˆåŠŸ

ğŸ“‹ ç¬¬äºŒæ­¥ï¼šè·å–ç¾¤åˆ—è¡¨...
âœ… è·å–åˆ° 5 ä¸ªç¾¤:
  1. AIç§‘æŠ€æ—©æŠ¥ç¾¤ (25 äºº)
  2. æŠ€æœ¯äº¤æµç¾¤ (18 äºº)
  3. äº§å“è®¨è®ºç¾¤ (12 äºº)

ğŸ’¬ ç¬¬å››æ­¥ï¼šæµ‹è¯•å‘é€åˆ°å•ä¸ªç¾¤...
âœ… æ¶ˆæ¯å‘é€åˆ°å•ä¸ªç¾¤æˆåŠŸ

ğŸ“¢ ç¬¬äº”æ­¥ï¼šæµ‹è¯•å‘é€åˆ°å¤šä¸ªç¾¤...
ğŸ“Š å¤šç¾¤å‘é€ç»“æœ:
   AIç§‘æŠ€æ—©æŠ¥ç¾¤: âœ… æˆåŠŸ
   æŠ€æœ¯äº¤æµç¾¤: âœ… æˆåŠŸ

ğŸ¨ ç¬¬å…­æ­¥ï¼šæµ‹è¯•å¯Œæ–‡æœ¬æ¶ˆæ¯...
âœ… å¯Œæ–‡æœ¬æ¶ˆæ¯å‘é€æˆåŠŸ

ğŸ“± ç¬¬ä¸ƒæ­¥ï¼šæµ‹è¯•æœ‹å‹åœˆå‘å¸ƒ...
âœ… æœ‹å‹åœˆå‘å¸ƒæˆåŠŸ

ğŸ‰ iPadåè®®å¾®ä¿¡åŠ©æ‰‹æµ‹è¯•å®Œæˆï¼
```

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. å®‰å…¨è€ƒè™‘

- ç¡®ä¿iPadåè®®åŠ©æ‰‹çš„webhookåœ°å€å®‰å…¨
- å®šæœŸæ›´æ–°è®¿é—®ä»¤ç‰Œ
- ç›‘æ§å¼‚å¸¸ç™»å½•å’Œæ“ä½œ

### 2. å‘é€é¢‘ç‡

- é¿å…å‘é€è¿‡äºé¢‘ç¹
- å»ºè®®ç¾¤æ¶ˆæ¯é—´éš”2-3ç§’
- æœ‹å‹åœˆå‘å¸ƒé—´éš”æ›´é•¿

### 3. å†…å®¹åˆè§„

- ç¡®ä¿å‘é€å†…å®¹ç¬¦åˆå¾®ä¿¡è§„èŒƒ
- é¿å…æ•æ„Ÿè¯æ±‡å’Œè¿è§„å†…å®¹
- å®šæœŸæ£€æŸ¥ç¾¤èŠçŠ¶æ€

## ğŸ”§ æ•…éšœæ’é™¤

### 1. è¿æ¥å¤±è´¥

```bash
# æ£€æŸ¥ç½‘ç»œè¿æ¥
ping your-ipad-assistant-ip

# æ£€æŸ¥ç«¯å£æ˜¯å¦å¼€æ”¾
telnet your-ipad-assistant-ip 8080
```

### 2. å‘é€å¤±è´¥

- æ£€æŸ¥ç¾¤åç§°æ˜¯å¦æ­£ç¡®
- ç¡®è®¤ç¾¤èŠçŠ¶æ€æ­£å¸¸
- éªŒè¯æ¶ˆæ¯å†…å®¹æ ¼å¼

### 3. æƒé™é—®é¢˜

- ç¡®è®¤iPadåè®®åŠ©æ‰‹æœ‰å‘é€æƒé™
- æ£€æŸ¥ç¾¤èŠç®¡ç†å‘˜æƒé™
- éªŒè¯ç”¨æˆ·èº«ä»½

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### 1. è¿æ¥æ± 

```python
# ä½¿ç”¨è¿æ¥æ± æé«˜æ€§èƒ½
client = IpadWechatClient()
await client.connect()
# ä¿æŒè¿æ¥ï¼Œé¿å…é¢‘ç¹é‡è¿
```

### 2. æ‰¹é‡æ“ä½œ

```python
# æ‰¹é‡å‘é€ï¼Œå‡å°‘ç½‘ç»œè¯·æ±‚
results = await client.send_to_multiple_groups(report, groups)
```

### 3. å¼‚æ­¥å¤„ç†

```python
# ä½¿ç”¨å¼‚æ­¥å¤„ç†æé«˜æ•ˆç‡
async def send_daily_report():
    tasks = [
        client.send_to_group(report, group) 
        for group in target_groups
    ]
    await asyncio.gather(*tasks)
```

## ğŸ¯ æœ€ä½³å®è·µ

1. **é…ç½®ç®¡ç†** - ä½¿ç”¨ç¯å¢ƒå˜é‡ç®¡ç†æ•æ„Ÿé…ç½®
2. **é”™è¯¯å¤„ç†** - å®Œå–„çš„å¼‚å¸¸å¤„ç†å’Œé‡è¯•æœºåˆ¶
3. **æ—¥å¿—è®°å½•** - è¯¦ç»†çš„æ“ä½œæ—¥å¿—å’ŒçŠ¶æ€ç›‘æ§
4. **æµ‹è¯•éªŒè¯** - å®šæœŸè¿è¡Œæµ‹è¯•è„šæœ¬éªŒè¯åŠŸèƒ½
5. **å¤‡ä»½æ¢å¤** - é‡è¦é…ç½®å’Œæ•°æ®çš„å¤‡ä»½ç­–ç•¥

---

**é…ç½®å®Œæˆæ—¶é—´**: 2025-09-07  
**ç³»ç»ŸçŠ¶æ€**: âœ… å·²é›†æˆå®Œæˆ  
**ä¸‹ä¸€æ­¥**: é…ç½®iPadåè®®åŠ©æ‰‹å¹¶æµ‹è¯•å®Œæ•´åŠŸèƒ½
